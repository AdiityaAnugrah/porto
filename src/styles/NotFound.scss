/* NotFound.scss – solid fallback + gradient per-digit (aman) */

$maxw: 860px;

/* Animations */
@keyframes nf-float { 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
@keyframes nf-fade-up { 0%{opacity:0;transform:translateY(12px) scale(.985)} 100%{opacity:1;transform:translateY(0) scale(1)} }
@keyframes nf-shimmer { 0%{background-position:-200% 50%} 100%{background-position:200% 50%} }
@keyframes nf-parallax { 0%{transform:translate(-10%,-6%) scale(1)} 50%{transform:translate(-12%,-9%) scale(1.02)} 100%{transform:translate(-10%,-6%) scale(1)} }

/* Root */
.nf {
  position: relative;
  min-height: clamp(72vh, 92vh, 100svh);
  display: grid;
  place-items: center;
  padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right))
           max(24px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
  background: var(--color-bg);
  color: var(--color-text);
  isolation: isolate;
  overflow: clip;

  &__content {
    position: relative; z-index: 2; width: 100%; max-width: $maxw; margin-inline: auto;
    text-align: center; padding: clamp(16px, 2vw, 28px);
    animation: nf-fade-up 600ms ease both;
  }

  /* Title 404 – SOLID fallback (pasti terlihat) */
  &__title {
    margin: 0 0 12px;
    display: inline-flex; gap: clamp(8px, 1.6vw, 16px);
    line-height: 1; font-weight: 800; letter-spacing: -0.02em;
    font-size: clamp(72px, 13vw, 178px);
    color: var(--color-text); /* fallback solid */
    filter: drop-shadow(0 4px 16px rgba(0,0,0,0.06));
  }

  &__digit {
    display: inline-block;
    animation: nf-float 6s ease-in-out infinite;
    will-change: transform;
  }
  &__digit:nth-child(2) { animation-delay: .22s; }
  &__digit:nth-child(3) { animation-delay: .44s; }

  &__message {
    margin: 10px auto 22px; font-size: clamp(14px, 2vw, 18px);
    opacity: .82; line-height: 1.7; letter-spacing: .01em;
    max-width: clamp(36ch, 60%, 68ch); text-wrap: balance;
  }

  &__cta {
    --ring: var(--color-primary);
    display: inline-flex; align-items: center; gap: 10px;
    padding: 10px 16px; border-radius: 12px;
    border: 1px solid var(--color-border);
    background: var(--color-surface); color: var(--color-text);
    text-decoration: none; font-weight: 600; font-size: clamp(13px,1.6vw,15px);
    transition: transform .16s ease, background-color .16s ease, border-color .16s ease,
                opacity .16s ease, box-shadow .16s ease;
    &:hover { transform: translateY(-1px);
      background: color-mix(in oklab, var(--color-primary) 70%, var(--color-surface));
      border-color: var(--color-border); opacity: .98; box-shadow: 0 6px 24px rgba(0,0,0,.08);
    }
    &:active { transform: translateY(0); }
    &:focus-visible { outline: 2px solid var(--ring); outline-offset: 3px; }
  }

  /* Background decoration */
  &__bg {
    position: absolute; inset: -20%; z-index: 1; pointer-events: none;
    filter: blur(46px) saturate(120%); opacity: .55;
    animation: nf-parallax 14s ease-in-out infinite; /* deklarasi di atas nested rule */

    background:
      radial-gradient(45% 60% at 25% 30%, var(--color-primary), transparent 65%),
      radial-gradient(40% 55% at 75% 70%, var(--color-text), transparent 65%);

    @supports (background: color-mix(in oklab, red, blue)) {
      background:
        radial-gradient(45% 60% at 25% 30%, var(--color-primary), transparent 65%),
        radial-gradient(40% 55% at 75% 70%, color-mix(in oklab, var(--color-primary) 60%, var(--color-text) 10%), transparent 65%);
    }
  }
}

/* FX ON: gradient & shimmer per-digit — hanya jika support */
.nf.nf--fx {
  @supports (-webkit-background-clip: text) or (background-clip: text) {
    .nf__digit {
      background: linear-gradient(90deg,
        var(--color-text) 10%,
        var(--color-primary) 50%,
        var(--color-text) 90%
      );
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;

      /* animation ditempatkan sebelum nested rule → no mixed-decls */
      animation: nf-float 6s ease-in-out infinite, nf-shimmer 3.8s ease-in-out infinite;

      /* Safari: gunakan text-fill transparan hanya bila tersedia */
      @supports (-webkit-text-fill-color: transparent) {
        -webkit-text-fill-color: transparent;
        color: transparent;
      }
    }
  }
}

/* Responsive & A11y */
@media (min-width: 640px) { .nf__message { letter-spacing: .015em; } }
@media (prefers-reduced-motion: reduce) {
  .nf__digit, .nf__content, .nf__bg, .nf__title { animation: none !important; }
}
@media (forced-colors: active) { .nf__cta { outline: 1px solid CanvasText; } }
